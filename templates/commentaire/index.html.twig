{% extends 'base.html.twig' %}

{% block title %}{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" type="text/css" href="{{ asset('css/style.css') }}">
	<link rel="stylesheet" href="{{ asset('node_modules/bootstrap/dist/css/bootstrap.min.css') }}">
{% endblock %}

{% block javascripts %}
	<script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
{% endblock %}

{% block body %}
	<div class="ajoutArticle">
		<form method="get" action="http://127.0.0.1:8000/article/new">
			<button type="submit" class="btn btn-success">Ajouter un article</button>
		</form>
		<h2>Articles</h2>
	</div>

	<div class="example-wrapper">
		{% for ar in Article %}

			<div class="espace"></div>

			<div class="comment">

				<div class="espace"></div>

				<img class="img_article" src="{{ar.imageArticle}}">

				<div class="espace"></div>

				<h3>{{ar.titreArticle}}</h3>
				<p>{{ar.contenuArticle}}</p>

				<div class="espace"></div>

				<div class="ajouterCommentaire">
					<form method="get" action="http://127.0.0.1:8000/commentaire/newCom">
    					<input type="hidden" name="article_id" value="{{ ar.id }}">
    					<button type="submit">commenter cet article</button>
					</form>
				</div>

				<div class="espace"></div>

			</div>
			{% for com in Commentaire %}
				{% if com.Article == ar %}
					<h2>Commentaires </h2>
					<div class="element">			
						<p class="poster">Posté le : {{com.createdAt |date("d/m/Y")}}</p>
						<p>{{com.contenuCommentaire}}</p>
						<hr>
						{% for i in Commentaire %}
							{% if i.fkSousCommentaire == com %}	
								<p class="poster">Posté le : {{i.createdAt |date("d/m/Y")}}</p>
								<p>{{i.contenuCommentaire}}</p>
							{% endif %}	
						{% endfor %}
					</div>
				{% endif %}
			{% endfor %}
		{% endfor %}
	</div>
{% endblock %}
